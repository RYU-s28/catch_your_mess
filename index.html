<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Catch Your Mess! (‰∫Ç‰∏üÊ®Ç)</title>
  <link rel="icon" type="image/x-icon" href="assets/images/icon.ico">
  <link rel="stylesheet" href="styles/style.css">
</head>
<body>
  <!-- Intro Video -->
  <div class="intro-video-container" id="introVideoContainer" style="display:none;">
    <video id="introVideo" playsinline>
      <source src="assets/video/intro.mp4" type="video/mp4">
    </video>
  </div>

  <!-- Home Menu Screen -->
  <div class="home-menu" id="homeMenu">
    <div class="home-content">
      <div class="game-logo">
        <img src="assets/images/good_drops/coin.png" alt="Coin" class="logo-coin">
        <h1 class="logo-title">CATCH YOUR MESS!</h1>
        <p class="logo-subtitle">‰∫Ç‰∏üÊ®Ç</p>
      </div>
      
      <div class="menu-buttons">
        <button class="menu-btn play-btn" id="menuPlayBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M8 5v14l11-7z" fill="currentColor"/>
          </svg>
          PLAY
        </button>
        <button class="menu-btn" id="menuHowToPlayBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          HOW TO PLAY
        </button>
        <button class="menu-btn" id="menuLeaderboardBtn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          LEADERBOARD
        </button>
      </div>
    </div>
  </div>

  <!-- Instructions Modal -->
  <div class="instructions-modal" id="instructionsModal" style="display:none;">
    <div class="instructions-content">
      <button class="close-btn" id="closeInstructions">√ó</button>
      <h2>How to Play</h2>
      <div class="instructions-grid">
        <div class="instruction-item">
          <img src="assets/images/good_drops/coin.png" alt="Good Item" class="instruction-icon">
          <h3>Catch Good Items</h3>
          <p>Earn points!</p>
        </div>
        <div class="instruction-item">
          <img src="assets/images/bad_drops/rubish.png" alt="Trash" class="instruction-icon">
          <h3>Avoid Trash</h3>
          <p>Lose points!</p>
        </div>
        <div class="instruction-item">
          <img src="assets/images/bad_drops/dynamite.png" alt="Bomb" class="instruction-icon">
          <h3>Watch Bombs</h3>
          <p>Lose a Life!</p>
        </div>
        <div class="instruction-item">
          <img src="assets/images/health.png" alt="Health" class="instruction-icon">
          <h3>Collect Hearts</h3>
          <p>Restore health!</p>
        </div>
      </div>
      <div class="controls-section">
        <h3>Controls</h3>
        <div class="controls-list">
          <div class="control-item">
            <span class="key-indicator">‚Üê ‚Üí</span>
            <span>Move basket</span>
          </div>
          <span class="control-separator">/</span>
          <div class="control-item">
            <span class="key-indicator">üñ±Ô∏è</span>
            <span>Move basket</span>
          </div>
          <div class="control-item">
            <span class="key-indicator">ESC</span>
            <span>Pause</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Leaderboard Modal -->
  <div class="instructions-modal" id="leaderboardModal" style="display:none;">
    <div class="leaderboard-modal-content">
      <button class="close-btn" id="closeLeaderboard">√ó</button>
      <h2>Top 10 Leaderboard</h2>
      <ol id="menuLeaderboardList" class="menu-leaderboard-list">
        <!-- Leaderboard entries will be injected here -->
      </ol>
    </div>
  </div>

  <div class="game-container" id="gameContainer" style="display:none;">
    <!-- Pause/ESC Button -->
    <button class="pause-btn" id="pauseBtn" aria-label="Pause Game">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="6" y="4" width="4" height="16" fill="currentColor" rx="1"/>
        <rect x="14" y="4" width="4" height="16" fill="currentColor" rx="1"/>
      </svg>
      <span class="pause-text">ESC</span>
    </button>

    <!-- Leaderboard Toggle Button -->
    <button class="leaderboard-toggle-btn" id="leaderboardToggleBtn" aria-label="Toggle Leaderboard">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <span class="leaderboard-text">Top 10</span>
    </button>

    <!-- Paper Mario-style Score Display -->
    <div class="score-display" id="scoreDisplay">
      <div class="score-label">SCORE</div>
      <div class="score-value" id="scoreValue">0</div>
    </div>

    <div class="game-viewport">
      <canvas id="gameCanvas" aria-label="Catch your mess game"></canvas>

      <!-- UI overlay (HTML/CSS) -- stats, title, game over -->
      <div class="ui-overlay" aria-hidden="false">
        <!-- <header class="ui-header">
          <h1 class="game-title">Catch Your Mess!</h1>
          <div class="stats-bar">
            <div class="stat-card">
              <div class="stat-label">Score</div>
              <div class="stat-value" id="uiScore">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Level</div>
              <div class="stat-value" id="uiLevel">1</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Bombs</div>
              <div class="stat-value" id="uiBombs">0/3</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Speed</div>
              <div class="stat-value" id="uiSpeed">1.00</div>
            </div>
          </div>
        </header> -->

        <!-- Game over modal -->
        <div id="gameOverModal" class="game-over-modal" style="display:none;">
          <div class="game-over-content">
            <h2>GAME OVER</h2>
            <p class="final-score">Final Score: <span id="finalScore">0</span></p>
            <button class="restart-btn" id="restartBtn">Play Again</button>
          </div>
        </div>

        <!-- Pause modal (ESC to open) -->
        <div id="pauseModal" class="game-over-modal" style="display:none;">
          <div class="game-over-content">
            <h2>PAUSED</h2>
            <p class="final-score">Game is paused</p>
            <div style="display:flex; gap:12px; justify-content:center;">
              <button class="restart-btn" id="continueBtn">Continue</button>
              <button class="restart-btn" id="resetBtn">Reset</button>
              <button class="restart-btn" id="quitBtn">Quit</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Leaderboard panel -->
      <div class="side-panel leaderboard-panel" id="leaderboardPanel" aria-hidden="true">
        <h2>Top 10</h2>
        <ol id="leaderboardList">
          <!-- Leaderboard entries will be injected here -->
        </ol>
      </div>

      <!-- Ayiee Character Popup -->
      <div class="ayiee-popup" id="ayieePopup">
        <div class="ayiee-character">
          <img src="assets/images/ayiee.png" alt="Ayiee" class="ayiee-image">
        </div>
        <div class="ayiee-dialogue" id="ayieeDialogue">
          <div class="dialogue-arrow"></div>
          <p class="dialogue-text" id="dialogueText">Welcome to Catch Your Mess!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Firebase SDKs (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script>
    // Firebase config (paste provided config)
    window.__FIREBASE_CONFIG = {
      apiKey: "AIzaSyA-nYSfnkRlBOwl7WmybRrIqzI2PcyWcuA",
      authDomain: "catch-your-mess.firebaseapp.com",
      projectId: "catch-your-mess",
      storageBucket: "catch-your-mess.firebasestorage.app",
      messagingSenderId: "24231287880",
      appId: "1:24231287880:web:5d8bb1bf0a2ed234fd4c7d",
      measurementId: "G-PKF6K9BKWN"
    };
  </script>

  <script src="scripts/script.js"></script>

  <footer>
    <p>¬©Romel Jr. Duran ÊùúÊ¶ÆÁë™    &emsp;   s24113328@stu.edu.tw</p>
  </footer>
</body>
</html>

